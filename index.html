<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>CER Massarosa ‚Äî La Nostra Energia</title>
  <meta name="description" content="CER Massarosa: comunit√† energetica rinnovabile. Produciamo, condividiamo e risparmiamo insieme. Partecipa." />
  <meta name="theme-color" content="#052e16" />

  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          fontFamily: {
            sans: ["ui-sans-serif", "system-ui", "Inter", "Segoe UI", "Roboto", "Helvetica", "Arial", "Apple Color Emoji", "Segoe UI Emoji"]
          }
        }
      }
    }
  </script>

  <style>
    html { scroll-behavior: smooth; }
    .glass { backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
  </style>
</head>

<body class="bg-green-950 text-slate-100 antialiased">
  <!-- Background glow -->
  <div class="pointer-events-none fixed inset-0 -z-10">
    <div class="absolute -top-40 left-1/2 h-[520px] w-[520px] -translate-x-1/2 rounded-full bg-emerald-500/25 blur-3xl"></div>
    <div class="absolute top-32 right-[-120px] h-[420px] w-[420px] rounded-full bg-green-400/20 blur-3xl"></div>
    <div class="absolute bottom-[-180px] left-[-120px] h-[520px] w-[520px] rounded-full bg-lime-400/15 blur-3xl"></div>
  </div>

<header class="sticky top-0 z-50 border-b border-white/10 bg-green-950/70 backdrop-blur">
  <div class="mx-auto flex max-w-6xl items-center justify-between px-4 py-3">

    <a href="index.html" class="flex items-center gap-3">
      <img src="logo.png" alt="Logo CER Massarosa" class="h-12 w-auto">
      <div class="leading-tight">
        <div class="text-sm font-semibold tracking-wide text-slate-200">CER MASSAROSA</div>
        <div class="text-xs text-slate-400">La Nostra Energia</div>
      </div>
    </a>

    <!-- Desktop nav -->
    <nav class="hidden md:flex items-center gap-6 text-sm text-slate-200">
      <a class="hover:text-white" href="index.html#cos-e">Cos‚Äô√®</a>
      <a class="hover:text-white" href="index.html#come-funziona">Come funziona</a>
      <a class="hover:text-white" href="index.html#documenti">Documenti</a>
      <a class="hover:text-white" href="news/index.html">News</a>
      <a class="hover:text-white" href="faq.html">FAQ</a>
      <a class="hover:text-white" href="index.html#contatti">Contatti</a>
    </nav>

    <div class="flex items-center gap-3">
      <a href="partecipa.html"
         class="hidden sm:inline-flex items-center justify-center rounded-2xl bg-green-500 px-5 py-2.5 text-sm font-extrabold text-slate-950 hover:bg-green-400">
        PARTECIPA
      </a>

      <!-- Mobile menu button -->
      <button id="mobileMenuBtn"
              class="inline-flex md:hidden items-center justify-center rounded-2xl border border-white/15 bg-white/5 px-3 py-2 hover:bg-white/10"
              aria-label="Apri menu"
              aria-expanded="false">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile dropdown -->
  <div id="mobileMenu" class="hidden md:hidden border-t border-white/10 bg-green-950/90">
    <div class="mx-auto max-w-6xl px-4 py-4 grid gap-2 text-sm text-slate-200">
      <a class="rounded-xl border border-white/10 bg-white/5 px-4 py-3 hover:bg-white/10" href="index.html#cos-e">Cos‚Äô√®</a>
      <a class="rounded-xl border border-white/10 bg-white/5 px-4 py-3 hover:bg-white/10" href="index.html#come-funziona">Come funziona</a>
      <a class="rounded-xl border border-white/10 bg-white/5 px-4 py-3 hover:bg-white/10" href="index.html#documenti">Documenti</a>
      <a class="rounded-xl border border-white/10 bg-white/5 px-4 py-3 hover:bg-white/10" href="news/index.html">News</a>
      <a class="rounded-xl border border-white/10 bg-white/5 px-4 py-3 hover:bg-white/10" href="faq.html">FAQ</a>
      <a class="rounded-xl border border-white/10 bg-white/5 px-4 py-3 hover:bg-white/10" href="index.html#contatti">Contatti</a>

      <a class="mt-2 inline-flex items-center justify-center rounded-2xl bg-green-500 px-6 py-3 text-sm font-extrabold text-slate-950 hover:bg-green-400"
         href="partecipa.html">
        PARTECIPA
      </a>
    </div>
  </div>

  <script>
    (function () {
      const btn = document.getElementById("mobileMenuBtn");
      const menu = document.getElementById("mobileMenu");
      if (!btn || !menu) return;

      btn.addEventListener("click", () => {
        const isOpen = !menu.classList.contains("hidden");
        menu.classList.toggle("hidden", isOpen);
        btn.setAttribute("aria-expanded", String(!isOpen));
      });

      menu.querySelectorAll("a").forEach(a => {
        a.addEventListener("click", () => {
          menu.classList.add("hidden");
          btn.setAttribute("aria-expanded", "false");
        });
      });
    })();
  </script>
</header>

  <!-- Hero -->
  <section class="relative">
    <div class="mx-auto grid max-w-6xl gap-10 px-4 py-14 md:grid-cols-2 md:py-20">
      <div class="space-y-6">
        <div class="inline-flex items-center gap-2 rounded-full border border-white/10 bg-white/5 px-3 py-1 text-xs text-slate-200">
          <span class="inline-block h-2 w-2 rounded-full bg-green-400"></span>
          Comunit√† Energetica Rinnovabile ‚Äî Massarosa
        </div>

        <h1 class="text-4xl font-black leading-tight tracking-tight md:text-5xl">
          CER MASSAROSA<br />
          <span class="text-transparent bg-clip-text bg-gradient-to-r from-emerald-300 via-green-300 to-lime-300">
            La Nostra Energia.
          </span>
        </h1>

        <p class="text-base leading-relaxed text-slate-200 md:text-lg">
          Produciamo, condividiamo e risparmiamo insieme.
          <span class="font-semibold text-white">Meno emissioni.</span>
          <span class="font-semibold text-white">Pi√π comunit√†.</span>
        </p>

        <div class="flex flex-col gap-3 sm:flex-row">
          <a id="partecipa" href="partecipa.html"
             class="inline-flex items-center justify-center rounded-2xl bg-green-500 px-6 py-3 text-base font-extrabold text-slate-950 shadow-xl shadow-green-500/25 hover:bg-green-400">
            PARTECIPA
          </a>
          <a href="#documenti"
             class="inline-flex items-center justify-center rounded-2xl border border-white/15 bg-white/5 px-6 py-3 text-base font-bold text-white hover:bg-white/10">
            Leggi Statuto & Regolamento
          </a>
        </div>

        <p class="text-xs text-slate-300">
          Condividiamo energia. Generiamo benefici locali.
        </p>

        <div class="grid grid-cols-3 gap-3 pt-2">
          <div class="rounded-2xl border border-white/10 bg-white/5 p-4 text-center">
            <div class="mb-2 text-2xl">üí∂</div>
            <div class="text-xs text-slate-300">Costo di adesione</div>
            <div class="text-sm font-bold">0‚Ç¨</div>
          </div>

          <div class="rounded-2xl border border-white/10 bg-white/5 p-4 text-center">
            <div class="mb-2 text-2xl">üîå</div>
            <div class="text-xs text-slate-300">Devo cambiare gestore?</div>
            <div class="text-sm font-bold">No</div>
          </div>

          <div class="rounded-2xl border border-white/10 bg-white/5 p-4 text-center">
            <div class="mb-2 text-2xl">üåç</div>
            <div class="text-xs text-slate-300">Benefici locali</div>
            <div class="text-sm font-bold">S√¨</div>
          </div>
        </div>
      </div>

      <!-- Visual card -->
      <div class="relative">
        <div class="absolute inset-0 -z-10 rounded-3xl bg-gradient-to-br from-emerald-400/20 via-green-400/15 to-lime-400/10 blur-xl"></div>

        <div class="rounded-3xl border border-white/10 bg-white/5 p-6 shadow-2xl shadow-black/40">
          <div class="flex items-start justify-between gap-4">
            <div>
              <div class="text-sm font-semibold text-slate-200">In breve:</div>
              <div class="text-2xl font-black">Una CER √® un ‚Äúteam‚Äù</div>
              <div class="text-sm text-slate-300">che condivide energia rinnovabile e incentivi.</div>
            </div>
            <div class="flex h-12 w-12 items-center justify-center rounded-2xl bg-white/10 ring-1 ring-white/10">
              üå±
            </div>
          </div>

          <div class="mt-6 grid gap-3">
            <div class="rounded-2xl border border-white/10 bg-green-950/40 p-4 flex items-start gap-4">
              <div class="text-2xl">‚ö°</div>
              <div>
                <div class="text-sm font-bold">Chi produce</div>
                <div class="text-sm text-slate-300">Valorizza energia e incentivi condivisi.</div>
              </div>
            </div>

            <div class="rounded-2xl border border-white/10 bg-green-950/40 p-4 flex items-start gap-4">
              <div class="text-2xl">üè†</div>
              <div>
                <div class="text-sm font-bold">Chi consuma</div>
                <div class="text-sm text-slate-300">Risparmia anche senza possedere un impianto.</div>
              </div>
            </div>

            <div class="rounded-2xl border border-white/10 bg-green-950/40 p-4 flex items-start gap-4">
              <div class="text-2xl">üå±</div>
              <div>
                <div class="text-sm font-bold">Il territorio</div>
                <div class="text-sm text-slate-300">Viene valorizzato localmente riducendo l'impatto ambientale.</div>
              </div>
            </div>
          </div>

          <div class="mt-6 flex items-center justify-between rounded-2xl border border-white/10 bg-white/5 p-4">
            <div class="text-sm">
              <div class="font-bold">Vuoi capire se sei idoneo?</div>
              <div class="text-slate-300">Compila il form: ti ricontattiamo.</div>
            </div>
            <a href="#contatti" class="rounded-xl bg-white/10 px-4 py-2 text-sm font-bold hover:bg-white/15">
              Vai ‚Üí
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

<!-- (tutto invariato fino alla sezione Newsletter) -->

<!-- Newsletter -->
<section class="border-t border-white/10" id="newsletter">
  <div class="mx-auto max-w-6xl px-4 py-14">
    <div class="rounded-3xl border border-white/10 bg-gradient-to-br from-emerald-400/20 via-green-400/15 to-lime-400/10 p-8 md:p-10">

      <div class="max-w-3xl">
        <h2 class="text-3xl font-black tracking-tight md:text-4xl">Iscriviti alla Newsletter</h2>
        <p class="mt-3 text-slate-200">
          Aggiornamenti su iniziative, eventi e comunicazioni della CER di Massarosa.
        </p>
      </div>

      <!-- ESITO INVIO -->
      <div id="nlStatusBox" class="mt-6 hidden rounded-3xl border border-white/10 bg-white/5 p-6">
        <div id="nlStatusTitle" class="text-sm font-extrabold"></div>
        <div id="nlStatusText" class="mt-2 text-sm text-slate-200"></div>
      </div>

      <iframe name="nlHiddenFrame" id="nlHiddenFrame" class="hidden"></iframe>

      <form id="newsletterForm"
            class="mt-8 grid gap-4 md:grid-cols-3"
            method="POST"
            target="nlHiddenFrame">

        <!-- anti-spam -->
        <div class="hidden">
          <label for="nl_website">Website</label>
          <input id="nl_website" name="website" autocomplete="off" tabindex="-1" />
        </div>

        <!-- per log minimo lato script -->
        <input type="hidden" name="userAgent" id="nlUserAgent" value="">
        <input type="hidden" name="ip" id="nlIp" value="">

        <div class="md:col-span-2">
          <label class="text-sm font-semibold text-slate-200" for="newsletter-email">Indirizzo Email *</label>
          <input id="newsletter-email" name="email" type="email" required
                 class="mt-1 w-full rounded-2xl border border-white/10 bg-green-950/40 px-4 py-3 text-slate-100 placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-green-300/60"
                 placeholder="nome@dominio.it" />
        </div>

        <div class="md:col-span-3">
          <label class="flex items-start gap-3 text-sm text-slate-200">
            <input type="checkbox" name="privacy" required class="mt-1 h-4 w-4 rounded border-white/20 bg-green-950/40">
            <span>
              Presa visione informativa Privacy * ‚Äî Confermo di aver letto e accettato l‚Äôinformativa
              (<a class="underline decoration-white/25 hover:decoration-white" href="privacy.html" target="_blank" rel="noopener">leggi qui</a>).
            </span>
          </label>
        </div>

        <div class="md:col-span-3">
          <button id="nlSubmitBtn" type="submit"
                  class="inline-flex items-center justify-center rounded-2xl bg-green-500 px-8 py-3 text-base font-extrabold text-slate-950 hover:bg-green-400">
            Iscriviti
          </button>
        </div>

        <p class="md:col-span-3 text-xs text-slate-400">
          Dopo l‚Äôiscrizione riceverai una email di conferma (controlla anche Spam/Promozioni).
        </p>
      </form>

    </div>
  </div>
</section>

<!-- (resto pagina invariato, incluso footer) -->

<footer class="mt-14 border-t border-white/10 bg-green-950/70">
  <div class="mx-auto max-w-6xl px-4 py-10">
    <div class="flex flex-col gap-6 md:flex-row md:items-center md:justify-between">
      <div class="flex items-center gap-3">
        <img src="logo.png" alt="Logo CER Massarosa" class="h-12 w-auto">
        <div class="leading-tight">
          <div class="text-sm font-semibold tracking-wide text-slate-200">CER MASSAROSA</div>
          <div class="text-xs text-slate-400">La Nostra Energia</div>
        </div>
      </div>

      <div class="flex flex-wrap gap-3 text-sm">
        <a class="rounded-xl border border-white/10 bg-white/5 px-4 py-2 hover:bg-white/10" href="index.html#documenti">Documenti</a>
        <a class="rounded-xl border border-white/10 bg-white/5 px-4 py-2 hover:bg-white/10" href="news/index.html">News</a>
        <a class="rounded-xl border border-white/10 bg-white/5 px-4 py-2 hover:bg-white/10" href="partecipa.html">Partecipa</a>
        <a class="rounded-xl border border-white/10 bg-white/5 px-4 py-2 hover:bg-white/10" href="privacy.html">Privacy</a>
      </div>
    </div>

    <div class="mt-8 border-t border-white/10 pt-6 text-xs text-slate-400">
      ¬© 2026 CER Massarosa ‚Äî Tutti i diritti riservati.
    </div>
  </div>
</footer>

<script>
  // ====== INCOLLA QUI URL /exec DELLA NEWSLETTER ======
  const NEWSLETTER_EXEC_URL = "https://script.google.com/macros/s/AKfycbx4uuJ8Dci_nWuxCLcNDZCNglZWjSnQ2UtnoOYq_8qs4n-eGnfaeIbHGSpYvomcaOsG/exec";

  const nlForm = document.getElementById("newsletterForm");
  const nlFrame = document.getElementById("nlHiddenFrame");
  const nlBtn = document.getElementById("nlSubmitBtn");

  const nlStatusBox = document.getElementById("nlStatusBox");
  const nlStatusTitle = document.getElementById("nlStatusTitle");
  const nlStatusText = document.getElementById("nlStatusText");

  function nlShow(kind, title, text) {
    nlStatusBox.classList.remove("hidden");
    nlStatusTitle.textContent = title;
    nlStatusText.textContent = text;

    nlStatusBox.classList.remove("border-green-400/30","bg-green-500/10","border-red-400/30","bg-red-500/10");
    if (kind === "ok") nlStatusBox.classList.add("border-green-400/30","bg-green-500/10");
    else nlStatusBox.classList.add("border-red-400/30","bg-red-500/10");

    nlStatusBox.scrollIntoView({ behavior: "smooth", block: "start" });
  }

  let nlWaiting = false;

  // UA (l‚ÄôIP dal browser non lo puoi leggere: lasciamo vuoto)
  document.getElementById("nlUserAgent").value = navigator.userAgent || "";
  document.getElementById("nlIp").value = "";

  nlForm.addEventListener("submit", (e) => {
    e.preventDefault();

    nlForm.action = NEWSLETTER_EXEC_URL;

    nlWaiting = true;
    nlBtn.disabled = true;
    nlBtn.textContent = "Invio in corso‚Ä¶";

    nlForm.submit();

    setTimeout(() => {
      if (!nlWaiting) return;
      nlWaiting = false;
      nlBtn.disabled = false;
      nlBtn.textContent = "Iscriviti";
      nlShow("err", "Invio non confermato", "Non ho ricevuto conferma tecnica. Riprova tra qualche minuto.");
    }, 12000);
  });

  nlFrame.addEventListener("load", () => {
    if (!nlWaiting) return;
    nlWaiting = false;

    nlBtn.disabled = false;
    nlBtn.textContent = "Iscriviti";

    nlShow("ok", "Iscrizione registrata", "Operazione completata. Riceverai una email di conferma (controlla Spam/Promozioni).");
    nlForm.reset();
    document.getElementById("nlUserAgent").value = navigator.userAgent || "";
    document.getElementById("nlIp").value = "";
  });
</script>

</body>
</html>
